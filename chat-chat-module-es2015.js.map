{"version":3,"sources":["./src/app/paciente/chat/chat.page.html","./src/app/models/mensagem.ts","./src/app/models/paciente.ts","./src/app/models/questionario.ts","./src/app/paciente/chat/chat.module.ts","./src/app/paciente/chat/chat.page.scss","./src/app/paciente/chat/chat.page.ts","./src/app/pipes/data-brasil.pipe.ts","./src/app/pipes/pipes.module.ts","./src/app/services/chat.service.ts","./src/app/services/paciente.service.ts"],"names":[],"mappings":"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","file":"chat-chat-module-es2015.js","sourcesContent":["module.exports = \"<ion-content #content>\\r\\n\\r\\n  <div id=\\\"mensagens\\\" *ngIf=\\\"mensagens.length != 00\\\">\\r\\n    <div [ngClass]=\\\"{\\r\\n        'msg-outro': m.pacienteUID != paciente.uid,\\r\\n        'msg-sua': m.pacienteUID == paciente.uid \\r\\n      }\\\" *ngFor=\\\"let m of mensagens\\\">\\r\\n    <ion-text>\\r\\n      <div class=\\\"header\\\">\\r\\n        <h1>Usuário {{m.pacienteCodigo}}</h1>  \\r\\n        <p class=\\\"data\\\">{{m.data|dataBrasil:true}}</p>\\r\\n      </div>\\r\\n      <p class=\\\"msg\\\">{{m.mensagem}}</p>\\r\\n    </ion-text>\\r\\n    </div>\\r\\n    \\r\\n  </div>\\r\\n\\r\\n\\r\\n  <div id=\\\"enviar\\\">\\r\\n    <ion-textarea [autoGrow]=\\\"true\\\" rows=\\\"1\\\" [(ngModel)]=\\\"mensagem\\\" placeholder=\\\"Digite seu texto\\\"></ion-textarea>\\r\\n    <ion-button (click)=\\\"enviar()\\\" fill=\\\"clear\\\">\\r\\n      <ion-icon slot=\\\"icon-only\\\" name=\\\"send\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","/**\r\n * Armazena a mensagem enviada no chat\r\n * @author Carlos W. Gama\r\n * @version 1.0.0\r\n */\r\nexport class Mensagem {\r\n\r\n    constructor(public pacienteCodigo?: number, public mensagem?: string, public data?: string, public uid?: string, public pacienteUID?: string, public coordenadorUID?: string) {}\r\n}\r\n","import { Questionario } from './questionario';\r\n\r\n/**\r\n * Classe com acesso ao dados do paciente\r\n */\r\nexport class Paciente {\r\n\r\n    // Lista a posição do paciente em relação aos demais\r\n    public rank = 0;\r\n\r\n    constructor(public uid?: string, public nome?: string, public codigo?: number,\r\n                public mediaCigarros: number = 0, public precoCigarro: number = 0.1,\r\n                public coordenadorUID?: string, public ultimoDiaRespondido?: string,\r\n                public avatar: number = 1,\r\n                public cigarrosEvitados: number = 0, public diasSeguidosSemFumar: number = 0,\r\n                public diasSemFumar: number = 0, public maxDiasSemFumar: number = 0,\r\n                public dinheiroAcumulado: number = 0, public dinheiroDisponivel: number = 0,\r\n                public primeiroAcesso: boolean = true,\r\n                public diasPraticoExercicio: number = 0, public excluido: boolean = false,\r\n                public questionariosDiarios: Questionario[] = []) { }\r\n\r\n    public get avatarURL(): string {\r\n        return `/assets/imgs/avatars/${this.avatar}.jpg`;\r\n    }\r\n}\r\n","/**\r\n * Questionário com os atributos das perguntas diarias\r\n */\r\nexport class Questionario {\r\n\r\n    /**\r\n     * @param dia | Dia da consulta (YYYY-MM-DD)\r\n     * @param humor | Como foi o humor do paciente 0 -> Baixo, 1 -> Médio, 2 -> Bom\r\n     * @param fumou | Se fumou naquele dia,\r\n     * @param cigarros | Quantidade de cigarros\r\n     * @param exercitou  | Se praticou exercicio\r\n     * @param vontadeFumar | Vontade de fumar 0 -> Baixa, 1 -> Normal, 2 -> Alta\r\n     */\r\n    constructor(public dia?: string,\r\n                public humor?: 0|1|2,\r\n                public fumou?: boolean,\r\n                public cigarros: number = 0,\r\n                public exercitou?: boolean,\r\n                public vontadeFumar?: 0|1|2) { }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ChatPage } from './chat.page';\r\nimport { PipesModule } from 'src/app/pipes/pipes.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChatPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PipesModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [ChatPage]\r\n})\r\nexport class ChatPageModule {}\r\n","module.exports = \"ion-content {\\n  --background: linear-gradient(-20deg, #04befe 0%, #4481eb 100%);\\n  --padding-bottom: 50px;\\n}\\n\\n#enviar {\\n  position: fixed;\\n  min-height: 50px;\\n  max-height: 100px;\\n  width: 100%;\\n  bottom: 0px;\\n  background-color: white;\\n  display: -webkit-box;\\n  display: flex;\\n}\\n\\n.msg-sua {\\n  background: lightcyan;\\n  padding: 5px;\\n  max-width: 90%;\\n  margin: 10px;\\n  border-radius: 10px;\\n  margin: 10px 10px 10px 10%;\\n}\\n\\n.msg-sua h1 {\\n  margin: 0px;\\n  text-align: right;\\n  color: #353333;\\n  font-size: 20px;\\n  font-weight: bolder;\\n}\\n\\n.msg-sua .msg {\\n  margin: 3px;\\n  text-align: right;\\n}\\n\\n.msg-sua .data {\\n  margin: 5px;\\n  color: grey;\\n}\\n\\n.msg-sua .header {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: reverse;\\n          flex-direction: row-reverse;\\n  -webkit-box-pack: justify;\\n          justify-content: space-between;\\n}\\n\\n.msg-outro {\\n  background: white;\\n  padding: 5px;\\n  max-width: 90%;\\n  margin: 10px;\\n  border-radius: 10px;\\n}\\n\\n.msg-outro h1 {\\n  margin: 0px;\\n  color: #725757;\\n  font-size: 20px;\\n  font-weight: bolder;\\n}\\n\\n.msg-outro .msg {\\n  margin: 3px;\\n  text-align: left;\\n}\\n\\n.msg-outro .data {\\n  margin: 5px;\\n  color: grey;\\n}\\n\\n.msg-outro .header {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-pack: justify;\\n          justify-content: space-between;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFjaWVudGUvY2hhdC9DOlxceGFtcHBcXGh0ZG9jc1xcbmFvLWZ1bWUtL3NyY1xcYXBwXFxwYWNpZW50ZVxcY2hhdFxcY2hhdC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhY2llbnRlL2NoYXQvY2hhdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwrREFBQTtFQUNBLHNCQUFBO0FDQ0o7O0FERUE7RUFDSSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0VBQ0EsdUJBQUE7RUFDQSxvQkFBQTtFQUFBLGFBQUE7QUNDSjs7QURFQTtFQUNJLHFCQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSwwQkFBQTtBQ0NKOztBRENJO0VBQUssV0FBQTtFQUFhLGlCQUFBO0VBQW1CLGNBQUE7RUFBdUIsZUFBQTtFQUFpQixtQkFBQTtBQ01qRjs7QURKSTtFQUFPLFdBQUE7RUFBYSxpQkFBQTtBQ1F4Qjs7QUROSTtFQUFRLFdBQUE7RUFBYSxXQUFBO0FDVXpCOztBRFBJO0VBQVUsb0JBQUE7RUFBQSxhQUFBO0VBQWUsOEJBQUE7RUFBQSw4QkFBQTtVQUFBLDJCQUFBO0VBQTZCLHlCQUFBO1VBQUEsOEJBQUE7QUNZMUQ7O0FEVEE7RUFDSSxpQkFBQTtFQUNBLFlBQUE7RUFDQSxjQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0FDWUo7O0FEVkk7RUFBSyxXQUFBO0VBQWEsY0FBQTtFQUF5QixlQUFBO0VBQWlCLG1CQUFBO0FDZ0JoRTs7QURkSTtFQUFPLFdBQUE7RUFBYSxnQkFBQTtBQ2tCeEI7O0FEaEJJO0VBQVEsV0FBQTtFQUFhLFdBQUE7QUNvQnpCOztBRGxCSTtFQUFVLG9CQUFBO0VBQUEsYUFBQTtFQUFjLHlCQUFBO1VBQUEsOEJBQUE7QUNzQjVCIiwiZmlsZSI6InNyYy9hcHAvcGFjaWVudGUvY2hhdC9jaGF0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IHtcclxuICAgIC0tYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KC0yMGRlZywgIzA0YmVmZSAwJSwgIzQ0ODFlYiAxMDAlKTtcclxuICAgIC0tcGFkZGluZy1ib3R0b206IDUwcHg7XHJcbn1cclxuXHJcbiNlbnZpYXIge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgbWluLWhlaWdodDogNTBweDtcclxuICAgIG1heC1oZWlnaHQ6IDEwMHB4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3R0b206IDBweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuXHJcbn1cclxuLm1zZy1zdWEge1xyXG4gICAgYmFja2dyb3VuZDogbGlnaHRjeWFuO1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG4gICAgbWF4LXdpZHRoOiA5MCU7XHJcbiAgICBtYXJnaW46IDEwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgbWFyZ2luOiAxMHB4IDEwcHggMTBweCAxMCUgO1xyXG5cclxuICAgIGgxIHsgbWFyZ2luOiAwcHg7IHRleHQtYWxpZ246IHJpZ2h0OyBjb2xvcjpyZ2IoNTMsIDUxLCA1MSk7IGZvbnQtc2l6ZTogMjBweDsgZm9udC13ZWlnaHQ6IGJvbGRlcjsgfVxyXG5cclxuICAgIC5tc2cgeyBtYXJnaW46IDNweDsgdGV4dC1hbGlnbjogcmlnaHQ7fVxyXG5cclxuICAgIC5kYXRhIHsgbWFyZ2luOiA1cHg7IGNvbG9yOiBncmV5fVxyXG5cclxuXHJcbiAgICAuaGVhZGVyIHsgZGlzcGxheTpmbGV4OyAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IH0gICAgXHJcbn1cclxuXHJcbi5tc2ctb3V0cm8ge1xyXG4gICAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbiAgICBtYXgtd2lkdGg6IDkwJTtcclxuICAgIG1hcmdpbjoxMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuXHJcbiAgICBoMSB7IG1hcmdpbjogMHB4OyBjb2xvcjpyZ2IoMTE0LCA4NywgODcpOyAgZm9udC1zaXplOiAyMHB4OyBmb250LXdlaWdodDogYm9sZGVyO31cclxuXHJcbiAgICAubXNnIHsgbWFyZ2luOiAzcHg7IHRleHQtYWxpZ246IGxlZnQ7fVxyXG5cclxuICAgIC5kYXRhIHsgbWFyZ2luOiA1cHg7IGNvbG9yOiBncmV5fVxyXG5cclxuICAgIC5oZWFkZXIgeyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjt9XHJcblxyXG59IiwiaW9uLWNvbnRlbnQge1xuICAtLWJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgtMjBkZWcsICMwNGJlZmUgMCUsICM0NDgxZWIgMTAwJSk7XG4gIC0tcGFkZGluZy1ib3R0b206IDUwcHg7XG59XG5cbiNlbnZpYXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIG1pbi1oZWlnaHQ6IDUwcHg7XG4gIG1heC1oZWlnaHQ6IDEwMHB4O1xuICB3aWR0aDogMTAwJTtcbiAgYm90dG9tOiAwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBkaXNwbGF5OiBmbGV4O1xufVxuXG4ubXNnLXN1YSB7XG4gIGJhY2tncm91bmQ6IGxpZ2h0Y3lhbjtcbiAgcGFkZGluZzogNXB4O1xuICBtYXgtd2lkdGg6IDkwJTtcbiAgbWFyZ2luOiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBtYXJnaW46IDEwcHggMTBweCAxMHB4IDEwJTtcbn1cbi5tc2ctc3VhIGgxIHtcbiAgbWFyZ2luOiAwcHg7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICBjb2xvcjogIzM1MzMzMztcbiAgZm9udC1zaXplOiAyMHB4O1xuICBmb250LXdlaWdodDogYm9sZGVyO1xufVxuLm1zZy1zdWEgLm1zZyB7XG4gIG1hcmdpbjogM3B4O1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cbi5tc2ctc3VhIC5kYXRhIHtcbiAgbWFyZ2luOiA1cHg7XG4gIGNvbG9yOiBncmV5O1xufVxuLm1zZy1zdWEgLmhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG4ubXNnLW91dHJvIHtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIHBhZGRpbmc6IDVweDtcbiAgbWF4LXdpZHRoOiA5MCU7XG4gIG1hcmdpbjogMTBweDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbn1cbi5tc2ctb3V0cm8gaDEge1xuICBtYXJnaW46IDBweDtcbiAgY29sb3I6ICM3MjU3NTc7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcbn1cbi5tc2ctb3V0cm8gLm1zZyB7XG4gIG1hcmdpbjogM3B4O1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xufVxuLm1zZy1vdXRybyAuZGF0YSB7XG4gIG1hcmdpbjogNXB4O1xuICBjb2xvcjogZ3JleTtcbn1cbi5tc2ctb3V0cm8gLmhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcbn0iXX0= */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Mensagem } from 'src/app/models/mensagem';\r\nimport * as moment from 'moment';\r\nimport { PacienteService } from 'src/app/services/paciente.service';\r\nimport { ChatService } from 'src/app/services/chat.service';\r\nimport { Paciente } from 'src/app/models/paciente';\r\nimport { IonContent } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-chat',\r\n  templateUrl: './chat.page.html',\r\n  styleUrls: ['./chat.page.scss'],\r\n})\r\n/**\r\n * Tela de Chat para os pacientes conversarem entre si\r\n * @author Carlos W. Gama\r\n */\r\nexport class ChatPage implements OnInit {\r\n\r\n  paciente = new Paciente;\r\n\r\n  @ViewChild('content', {static:false}) content:IonContent;\r\n\r\n  //Mensagem enviada \r\n  mensagem:string = '';\r\n\r\n  //Mensagens do chat\r\n  mensagens:Mensagem[] = [];\r\n\r\n  constructor(private pacienteService:PacienteService, private chatService: ChatService) { }\r\n\r\n  async ngOnInit() {\r\n    \r\n    this.paciente = await this.pacienteService.getPacienteLogado();\r\n    //Busca as mensagens como Observable\r\n    this.chatService.buscarMensagens(this.paciente.coordenadorUID).onSnapshot(async (snapshot) => {\r\n      this.mensagens = []\r\n      snapshot.forEach(doc => {\r\n        this.mensagens.unshift(Object.assign(new Mensagem, doc.data()))\r\n      })\r\n      await new Promise(resolve => { setTimeout(resolve, 500)});\r\n      this.content.scrollToBottom(300);\r\n      \r\n\r\n    })\r\n    //this.mensagem = await;\r\n  }\r\n\r\n  /** Envia a mensagem para o Chat */\r\n  enviar() {\r\n    this.chatService.enviar(this.mensagem, this.paciente);\r\n    this.mensagem = '';\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'dataBrasil'\r\n})\r\n/**\r\n * Um Pipe que converte o formato de Y-m-d para d/m/Y\r\n * @author Carlos W. Gama\r\n */\r\nexport class DataBrasilPipe implements PipeTransform {\r\n\r\n  transform(value: string, ...args: any[]): any {\r\n    if (args[0] != true)\r\n      return value.split('-').reverse().join('/');\r\n    else {\r\n      let dataHora = value.split(' ');\r\n      return dataHora[0].split('-').reverse().join('/') + ' ' + dataHora[1];\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DataBrasilPipe } from './data-brasil.pipe';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [DataBrasilPipe],\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [DataBrasilPipe]\r\n})\r\nexport class PipesModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport * as firebase from 'firebase';\r\nimport { Paciente } from '../models/paciente';\r\nimport { Mensagem } from '../models/mensagem';\r\nimport * as moment from 'moment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ChatService {\r\n\r\n  private chatDB: firebase.firestore.CollectionReference;\r\n\r\n  constructor() { \r\n    this.chatDB = firebase.firestore().collection('chat');\r\n  }\r\n\r\n  /**\r\n   * Busca todas as mensagens que fazem parte do grupo de um coordenador\r\n   * @param coordenadorUID \r\n   */\r\n  buscarMensagens(coordenadorUID: string) {\r\n    return this.chatDB.where('coordenadorUID', '==', coordenadorUID).orderBy('data', 'desc').limit(50);\r\n  }\r\n\r\n  /**\r\n   * Envia uma nova mensagem\r\n   * @param mensagem \r\n   * @param remetente \r\n   */\r\n  enviar(mensagem: string, remetente: Paciente) {\r\n    let doc = this.chatDB.doc();\r\n    let data = moment().format(\"YYYY-MM-DD HH:mm:ss\") \r\n    console.log(remetente);\r\n    let msg = new Mensagem(remetente.codigo, mensagem, data, doc.id, remetente.uid, remetente.coordenadorUID);\r\n    console.log(msg);\r\n    doc.set(Object.assign({}, msg));\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport * as moment from 'moment'\r\nimport * as firebase from 'firebase';\r\nimport { Paciente } from '../models/paciente';\r\nimport { Questionario } from '../models/questionario';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n/**\r\n * Controla os dados dos questionários do paciente\r\n */\r\nexport class PacienteService {\r\n\r\n    private pacienteDB: firebase.firestore.CollectionReference;\r\n    private usuarioID:string;\r\n    private paciente:Paciente = null;\r\n\r\n\r\n    constructor() { \r\n        firebase.auth().onAuthStateChanged(user => { \r\n            if (user != null)\r\n                this.usuarioID = user.uid;\r\n        })\r\n        this.pacienteDB = firebase.firestore().collection('pacientes');\r\n    }\r\n\r\n    \r\n    //============================= BUSCAR COMO COORDENADOR =================================//\r\n    /**\r\n     * Busca todos os pacientes de um Coordenador\r\n     */\r\n    public async buscarTodos(): Promise<Paciente[]> {\r\n        console.log(this.usuarioID);\r\n        return this.pacienteDB.where('coordenadorUID', '==' ,this.usuarioID).where('excluido', '==', false).orderBy('nome').get().then(async snapshots => {\r\n            let pacientes:Paciente[] = [];\r\n            const retorno = snapshots.docs.map(async doc => {\r\n                let paciente = Object.assign(new Paciente, doc.data());\r\n                \r\n                await this.pacienteDB.doc(paciente.uid).collection('questionariosDiarios').get().then(snapshot => {\r\n                    snapshot.forEach(doc => {\r\n                        paciente.questionariosDiarios.push(Object.assign(new Questionario, doc.data()));\r\n                    })\r\n                })\r\n                return paciente;\r\n            });\r\n            await Promise.all(retorno).then(dados => { dados.forEach(p => {pacientes.push(Object.assign(new Paciente, p))}) })\r\n            console.log(pacientes);\r\n            return pacientes;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Busca o Paciente pelo seu ID unico \r\n     * @param uid \r\n     */\r\n    public async buscar(uid:string): Promise<Paciente> {\r\n        return this.pacienteDB\r\n            .where('coordenadorUID', '==' ,this.usuarioID)\r\n            .where('excluido', '==', false)\r\n            .where('uid', '==', uid)\r\n            .get().then(snapshot => {\r\n                if (snapshot.empty) return null;\r\n                return snapshot.docs[0].data() as Paciente;\r\n            })\r\n    }\r\n    //============================= BUSCAR COMO PACIENTE =================================//\r\n    /**\r\n     * Recupera os dados do Paciente logado\r\n     */\r\n    public async getPacienteLogado():Promise<Paciente> {\r\n        if (this.paciente != null && this.paciente.uid == this.usuarioID) \r\n            return this.paciente;\r\n\r\n        let doc = await this.pacienteDB.doc(this.usuarioID).get();\r\n        let dados = doc.data();\r\n       \r\n        await this.pacienteDB.where('excluido', '==', false)\r\n                       .where('coordenadorUID', '==', dados.coordenadorUID)\r\n                       .orderBy('diasSeguidosSemFumar', 'desc')\r\n                       .get().then(snapshat => {\r\n                            let rank = 0;\r\n                            snapshat.forEach(doc => {\r\n                                rank++;\r\n                                let p = doc.data();\r\n                                if (p.uid == this.usuarioID) dados['rank'] = rank;\r\n                            })\r\n                       })\r\n\r\n        this.paciente = Object.assign(new Paciente, dados);\r\n\r\n        await this.pacienteDB.doc(this.paciente.uid).collection('questionariosDiarios').get().then(snapshot => {\r\n            snapshot.forEach(doc => {\r\n                this.paciente.questionariosDiarios.push(Object.assign(new Questionario, doc.data()));\r\n            })\r\n        })\r\n\r\n        return this.paciente;\r\n    }\r\n\r\n    /**\r\n     * Atualiza os dados do paciente\r\n     * @param paciente \r\n     */\r\n    public atualizarPaciente(paciente:Paciente) {\r\n        let dados = Object.assign({}, paciente);\r\n        delete dados.questionariosDiarios;\r\n        this.pacienteDB.doc(paciente.uid).update(dados);\r\n\r\n        if (this.paciente.uid == paciente.uid)\r\n            this.paciente = paciente;\r\n    }\r\n\r\n}"],"sourceRoot":""}