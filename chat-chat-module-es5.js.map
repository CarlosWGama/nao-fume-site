{"version":3,"sources":["./src/app/paciente/chat/chat.page.html","./src/app/models/mensagem.ts","./src/app/paciente/chat/chat.module.ts","./src/app/paciente/chat/chat.page.scss","./src/app/paciente/chat/chat.page.ts","./src/app/pipes/data-brasil.pipe.ts","./src/app/pipes/pipes.module.ts","./src/app/services/chat.service.ts"],"names":[],"mappings":"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","file":"chat-chat-module-es5.js","sourcesContent":["module.exports = \"<ion-content #content>\\r\\n\\r\\n  <div id=\\\"mensagens\\\" *ngIf=\\\"mensagens.length != 00\\\">\\r\\n    <div [ngClass]=\\\"{\\r\\n        'msg-outro': m.pacienteUID != paciente.uid,\\r\\n        'msg-sua': m.pacienteUID == paciente.uid \\r\\n      }\\\" *ngFor=\\\"let m of mensagens\\\">\\r\\n    <ion-text>\\r\\n      <div class=\\\"header\\\">\\r\\n        <h1>Usu√°rio {{m.pacienteCodigo}}</h1>  \\r\\n        <p class=\\\"data\\\">{{m.data|dataBrasil:true}}</p>\\r\\n      </div>\\r\\n      <p class=\\\"msg\\\">{{m.mensagem}}</p>\\r\\n    </ion-text>\\r\\n    </div>\\r\\n    \\r\\n  </div>\\r\\n\\r\\n\\r\\n  <div id=\\\"enviar\\\">\\r\\n    <ion-textarea [autoGrow]=\\\"true\\\" rows=\\\"1\\\" [(ngModel)]=\\\"mensagem\\\" placeholder=\\\"Digite seu texto\\\"></ion-textarea>\\r\\n    <ion-button (click)=\\\"enviar()\\\" fill=\\\"clear\\\">\\r\\n      <ion-icon slot=\\\"icon-only\\\" name=\\\"send\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","/**\r\n * Armazena a mensagem enviada no chat\r\n * @author Carlos W. Gama\r\n * @version 1.0.0\r\n */\r\nexport class Mensagem {\r\n\r\n    constructor(public pacienteCodigo?: number, public mensagem?: string, public data?: string, public uid?: string, public pacienteUID?: string, public coordenadorUID?: string) {}\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ChatPage } from './chat.page';\r\nimport { PipesModule } from 'src/app/pipes/pipes.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChatPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PipesModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [ChatPage]\r\n})\r\nexport class ChatPageModule {}\r\n","module.exports = \"ion-content {\\n  --background: linear-gradient(-20deg, #04befe 0%, #4481eb 100%);\\n  --padding-bottom: 50px;\\n}\\n\\n#enviar {\\n  position: fixed;\\n  min-height: 50px;\\n  max-height: 100px;\\n  width: 100%;\\n  bottom: 0px;\\n  background-color: white;\\n  display: -webkit-box;\\n  display: flex;\\n}\\n\\n.msg-sua {\\n  background: lightcyan;\\n  padding: 5px;\\n  max-width: 90%;\\n  margin: 10px;\\n  border-radius: 10px;\\n  margin: 10px 10px 10px 10%;\\n}\\n\\n.msg-sua h1 {\\n  margin: 0px;\\n  text-align: right;\\n  color: #353333;\\n  font-size: 20px;\\n  font-weight: bolder;\\n}\\n\\n.msg-sua .msg {\\n  margin: 3px;\\n  text-align: right;\\n}\\n\\n.msg-sua .data {\\n  margin: 5px;\\n  color: grey;\\n}\\n\\n.msg-sua .header {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: reverse;\\n          flex-direction: row-reverse;\\n  -webkit-box-pack: justify;\\n          justify-content: space-between;\\n}\\n\\n.msg-outro {\\n  background: white;\\n  padding: 5px;\\n  max-width: 90%;\\n  margin: 10px;\\n  border-radius: 10px;\\n}\\n\\n.msg-outro h1 {\\n  margin: 0px;\\n  color: #725757;\\n  font-size: 20px;\\n  font-weight: bolder;\\n}\\n\\n.msg-outro .msg {\\n  margin: 3px;\\n  text-align: left;\\n}\\n\\n.msg-outro .data {\\n  margin: 5px;\\n  color: grey;\\n}\\n\\n.msg-outro .header {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-pack: justify;\\n          justify-content: space-between;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFjaWVudGUvY2hhdC9DOlxceGFtcHBcXGh0ZG9jc1xcbmFvLWZ1bWUtL3NyY1xcYXBwXFxwYWNpZW50ZVxcY2hhdFxcY2hhdC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhY2llbnRlL2NoYXQvY2hhdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwrREFBQTtFQUNBLHNCQUFBO0FDQ0o7O0FERUE7RUFDSSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0VBQ0EsdUJBQUE7RUFDQSxvQkFBQTtFQUFBLGFBQUE7QUNDSjs7QURFQTtFQUNJLHFCQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSwwQkFBQTtBQ0NKOztBRENJO0VBQUssV0FBQTtFQUFhLGlCQUFBO0VBQW1CLGNBQUE7RUFBdUIsZUFBQTtFQUFpQixtQkFBQTtBQ01qRjs7QURKSTtFQUFPLFdBQUE7RUFBYSxpQkFBQTtBQ1F4Qjs7QUROSTtFQUFRLFdBQUE7RUFBYSxXQUFBO0FDVXpCOztBRFBJO0VBQVUsb0JBQUE7RUFBQSxhQUFBO0VBQWUsOEJBQUE7RUFBQSw4QkFBQTtVQUFBLDJCQUFBO0VBQTZCLHlCQUFBO1VBQUEsOEJBQUE7QUNZMUQ7O0FEVEE7RUFDSSxpQkFBQTtFQUNBLFlBQUE7RUFDQSxjQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0FDWUo7O0FEVkk7RUFBSyxXQUFBO0VBQWEsY0FBQTtFQUF5QixlQUFBO0VBQWlCLG1CQUFBO0FDZ0JoRTs7QURkSTtFQUFPLFdBQUE7RUFBYSxnQkFBQTtBQ2tCeEI7O0FEaEJJO0VBQVEsV0FBQTtFQUFhLFdBQUE7QUNvQnpCOztBRGxCSTtFQUFVLG9CQUFBO0VBQUEsYUFBQTtFQUFjLHlCQUFBO1VBQUEsOEJBQUE7QUNzQjVCIiwiZmlsZSI6InNyYy9hcHAvcGFjaWVudGUvY2hhdC9jaGF0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IHtcclxuICAgIC0tYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KC0yMGRlZywgIzA0YmVmZSAwJSwgIzQ0ODFlYiAxMDAlKTtcclxuICAgIC0tcGFkZGluZy1ib3R0b206IDUwcHg7XHJcbn1cclxuXHJcbiNlbnZpYXIge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgbWluLWhlaWdodDogNTBweDtcclxuICAgIG1heC1oZWlnaHQ6IDEwMHB4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3R0b206IDBweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuXHJcbn1cclxuLm1zZy1zdWEge1xyXG4gICAgYmFja2dyb3VuZDogbGlnaHRjeWFuO1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG4gICAgbWF4LXdpZHRoOiA5MCU7XHJcbiAgICBtYXJnaW46IDEwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgbWFyZ2luOiAxMHB4IDEwcHggMTBweCAxMCUgO1xyXG5cclxuICAgIGgxIHsgbWFyZ2luOiAwcHg7IHRleHQtYWxpZ246IHJpZ2h0OyBjb2xvcjpyZ2IoNTMsIDUxLCA1MSk7IGZvbnQtc2l6ZTogMjBweDsgZm9udC13ZWlnaHQ6IGJvbGRlcjsgfVxyXG5cclxuICAgIC5tc2cgeyBtYXJnaW46IDNweDsgdGV4dC1hbGlnbjogcmlnaHQ7fVxyXG5cclxuICAgIC5kYXRhIHsgbWFyZ2luOiA1cHg7IGNvbG9yOiBncmV5fVxyXG5cclxuXHJcbiAgICAuaGVhZGVyIHsgZGlzcGxheTpmbGV4OyAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IH0gICAgXHJcbn1cclxuXHJcbi5tc2ctb3V0cm8ge1xyXG4gICAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbiAgICBtYXgtd2lkdGg6IDkwJTtcclxuICAgIG1hcmdpbjoxMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuXHJcbiAgICBoMSB7IG1hcmdpbjogMHB4OyBjb2xvcjpyZ2IoMTE0LCA4NywgODcpOyAgZm9udC1zaXplOiAyMHB4OyBmb250LXdlaWdodDogYm9sZGVyO31cclxuXHJcbiAgICAubXNnIHsgbWFyZ2luOiAzcHg7IHRleHQtYWxpZ246IGxlZnQ7fVxyXG5cclxuICAgIC5kYXRhIHsgbWFyZ2luOiA1cHg7IGNvbG9yOiBncmV5fVxyXG5cclxuICAgIC5oZWFkZXIgeyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjt9XHJcblxyXG59IiwiaW9uLWNvbnRlbnQge1xuICAtLWJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgtMjBkZWcsICMwNGJlZmUgMCUsICM0NDgxZWIgMTAwJSk7XG4gIC0tcGFkZGluZy1ib3R0b206IDUwcHg7XG59XG5cbiNlbnZpYXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIG1pbi1oZWlnaHQ6IDUwcHg7XG4gIG1heC1oZWlnaHQ6IDEwMHB4O1xuICB3aWR0aDogMTAwJTtcbiAgYm90dG9tOiAwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBkaXNwbGF5OiBmbGV4O1xufVxuXG4ubXNnLXN1YSB7XG4gIGJhY2tncm91bmQ6IGxpZ2h0Y3lhbjtcbiAgcGFkZGluZzogNXB4O1xuICBtYXgtd2lkdGg6IDkwJTtcbiAgbWFyZ2luOiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBtYXJnaW46IDEwcHggMTBweCAxMHB4IDEwJTtcbn1cbi5tc2ctc3VhIGgxIHtcbiAgbWFyZ2luOiAwcHg7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICBjb2xvcjogIzM1MzMzMztcbiAgZm9udC1zaXplOiAyMHB4O1xuICBmb250LXdlaWdodDogYm9sZGVyO1xufVxuLm1zZy1zdWEgLm1zZyB7XG4gIG1hcmdpbjogM3B4O1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cbi5tc2ctc3VhIC5kYXRhIHtcbiAgbWFyZ2luOiA1cHg7XG4gIGNvbG9yOiBncmV5O1xufVxuLm1zZy1zdWEgLmhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG4ubXNnLW91dHJvIHtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIHBhZGRpbmc6IDVweDtcbiAgbWF4LXdpZHRoOiA5MCU7XG4gIG1hcmdpbjogMTBweDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbn1cbi5tc2ctb3V0cm8gaDEge1xuICBtYXJnaW46IDBweDtcbiAgY29sb3I6ICM3MjU3NTc7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcbn1cbi5tc2ctb3V0cm8gLm1zZyB7XG4gIG1hcmdpbjogM3B4O1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xufVxuLm1zZy1vdXRybyAuZGF0YSB7XG4gIG1hcmdpbjogNXB4O1xuICBjb2xvcjogZ3JleTtcbn1cbi5tc2ctb3V0cm8gLmhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcbn0iXX0= */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Mensagem } from 'src/app/models/mensagem';\r\nimport * as moment from 'moment';\r\nimport { PacienteService } from 'src/app/services/paciente.service';\r\nimport { ChatService } from 'src/app/services/chat.service';\r\nimport { Paciente } from 'src/app/models/paciente';\r\nimport { IonContent } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-chat',\r\n  templateUrl: './chat.page.html',\r\n  styleUrls: ['./chat.page.scss'],\r\n})\r\n/**\r\n * Tela de Chat para os pacientes conversarem entre si\r\n * @author Carlos W. Gama\r\n */\r\nexport class ChatPage implements OnInit {\r\n\r\n  paciente = new Paciente;\r\n\r\n  @ViewChild('content', {static:false}) content:IonContent;\r\n\r\n  //Mensagem enviada \r\n  mensagem:string = '';\r\n\r\n  //Mensagens do chat\r\n  mensagens:Mensagem[] = [];\r\n\r\n  constructor(private pacienteService:PacienteService, private chatService: ChatService) { }\r\n\r\n  async ngOnInit() {\r\n    \r\n    this.paciente = await this.pacienteService.getPacienteLogado();\r\n    //Busca as mensagens como Observable\r\n    this.chatService.buscarMensagens(this.paciente.coordenadorUID).onSnapshot(async (snapshot) => {\r\n      this.mensagens = []\r\n      snapshot.forEach(doc => {\r\n        this.mensagens.unshift(Object.assign(new Mensagem, doc.data()))\r\n      })\r\n      await new Promise(resolve => { setTimeout(resolve, 500)});\r\n      this.content.scrollToBottom(300);\r\n      \r\n\r\n    })\r\n    //this.mensagem = await;\r\n  }\r\n\r\n  /** Envia a mensagem para o Chat */\r\n  enviar() {\r\n    this.chatService.enviar(this.mensagem, this.paciente);\r\n    this.mensagem = '';\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'dataBrasil'\r\n})\r\n/**\r\n * Um Pipe que converte o formato de Y-m-d para d/m/Y\r\n * @author Carlos W. Gama\r\n */\r\nexport class DataBrasilPipe implements PipeTransform {\r\n\r\n  transform(value: string, ...args: any[]): any {\r\n    if (args[0] != true)\r\n      return value.split('-').reverse().join('/');\r\n    else {\r\n      let dataHora = value.split(' ');\r\n      return dataHora[0].split('-').reverse().join('/') + ' ' + dataHora[1];\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DataBrasilPipe } from './data-brasil.pipe';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [DataBrasilPipe],\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [DataBrasilPipe]\r\n})\r\nexport class PipesModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport * as firebase from 'firebase';\r\nimport { Paciente } from '../models/paciente';\r\nimport { Mensagem } from '../models/mensagem';\r\nimport * as moment from 'moment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ChatService {\r\n\r\n  private chatDB: firebase.firestore.CollectionReference;\r\n\r\n  constructor() { \r\n    this.chatDB = firebase.firestore().collection('chat');\r\n  }\r\n\r\n  /**\r\n   * Busca todas as mensagens que fazem parte do grupo de um coordenador\r\n   * @param coordenadorUID \r\n   */\r\n  buscarMensagens(coordenadorUID: string) {\r\n    return this.chatDB.where('coordenadorUID', '==', coordenadorUID).orderBy('data', 'desc').limit(50);\r\n  }\r\n\r\n  /**\r\n   * Envia uma nova mensagem\r\n   * @param mensagem \r\n   * @param remetente \r\n   */\r\n  enviar(mensagem: string, remetente: Paciente) {\r\n    let doc = this.chatDB.doc();\r\n    let data = moment().format(\"YYYY-MM-DD HH:mm:ss\") \r\n    console.log(remetente);\r\n    let msg = new Mensagem(remetente.codigo, mensagem, data, doc.id, remetente.uid, remetente.coordenadorUID);\r\n    console.log(msg);\r\n    doc.set(Object.assign({}, msg));\r\n  }\r\n}\r\n"],"sourceRoot":""}